<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Science 2025 Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .student-list { margin-top: 20px; }
        .student { border: 1px solid #ddd; margin: 10px 0; padding: 10px; }
        .curriculum { margin-top: 40px; border-top: 2px solid #ccc; padding-top: 20px; }
        canvas { max-width: 600px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Data Science 2025 Student Progress Dashboard</h1>
    <p>Average Completion Rate: <span id="average-rate"></span>%</p>
    <canvas id="completionChart"></canvas>
    <div class="student-list" id="studentList"></div>
    
    <div class="curriculum">
        <h2>Curriculum Overview</h2>
        <p>The Eldohub Certificate in Data Science (Level 4) curriculum is structured into 6 modules covering developer fundamentals to model deployment. Full details in <a href="../doc/curriculum.md">doc/curriculum.md</a>.</p>
        <ul>
            <li><strong>Module 0:</strong> Developer Fundamentals (Git, CLI, Docker)</li>
            <li><strong>Module 1:</strong> Python Programming (55% weight)</li>
            <li><strong>Module 2:</strong> SQL & Data Manipulation</li>
            <li><strong>Module 3:</strong> Data Analysis & Visualization</li>
            <li><strong>Module 4:</strong> Machine Learning Foundations</li>
            <li><strong>Module 5:</strong> System Design & Deployment</li>
            <li><strong>Capstone:</strong> End-to-end project deployment</li>
        </ul>
        <p>Progress is tracked against 22 weekly assignments aligned with modules.</p>
    </div>

    <script>
        fetch('../completion_analysis.json')
            .then(response => response.json())
            .then(data => {
                const students = Object.values(data);
                const averageRate = students.reduce((sum, s) => sum + s.completion_rate, 0) / students.length;
                document.getElementById('average-rate').textContent = averageRate.toFixed(1);

                // Simple bar chart for completion rates
                const ctx = document.getElementById('completionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: students.map(s => s.student),
                        datasets: [{
                            label: 'Completion Rate (%)',
                            data: students.map(s => s.completion_rate),
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: { scales: { y: { beginAtZero: true, max: 100 } } }
                });

                // Student list
                const listDiv = document.getElementById('studentList');
                students.sort((a, b) => b.completion_rate - a.completion_rate);
                students.forEach(student => {
                    const div = document.createElement('div');
                    div.className = 'student';
                    div.innerHTML = `
                        <h3>${student.student} - ${student.completion_rate.toFixed(1)}% (${student.completed}/${22})</h3>
                        <p>Assignments: ${student.assignment_numbers.join(', ')}</p>
                        <p>Files: ${student.files.length > 0 ? student.files.slice(0, 5).join(', ') + '...' : 'None'}</p>
                    `;
                    listDiv.appendChild(div);
                });
            });
    </script>
</body>
</html>